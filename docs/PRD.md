# 커피 주문 앱

## 1. 프로젝트 개요

### 1.1 프로젝트명
커피 주문 앱

### 1.2 프로젝트 목적
사용자가 커피 메뉴를 주문하고, 관리자가 주문을 관리할 수 있는 간단한 풀스택 웹 앱

### 1.3 개발 범위
- 주문하기 화면 (메뉴 선택 및 장바구니 기능)
- 관리자 화면 (재고 관리 및 주문 상태 관리)
- 데이터를 생성/조회/수정/삭제할 수 있는 기능

## 2. 기술 스택
- 프런트엔드 : HTML, CSS, 리액트, 자바스크립트
- 백엔드 : Node.js, Express
- 데이터베이스 : PostgreSQL

## 3. 기본 사항
- 프런트엔드와 백엔드를 따로 개발
- 기본적인 웹 기술만 사용
- 학습 목적이므로 사용자 인증이나 결제 기능은 제외
- 메뉴는 커피 메뉴만 있음

## 4. 화면별 상세 요구사항

### 4.1 주문하기 화면

#### 4.1.1 화면 구성

주문하기 화면은 다음과 같은 영역으로 구성됩니다:
- 헤더 영역
- 메뉴 아이템 목록 영역
- 장바구니 영역

#### 4.1.2 헤더 영역

**레이아웃**
- 화면 상단에 고정 배치
- 좌측: 브랜드 로고/텍스트
- 우측: 네비게이션 버튼들

**요소**
1. **브랜드 로고**
   - 좌측 상단에 배치
   - "COZY" 텍스트 표시
   - 어두운 초록색 배경 (#006400 또는 유사한 색상)

2. **주문하기 버튼**
   - 우측 상단 첫 번째 버튼
   - 텍스트: "주문하기"
   - 밝은 회색 배경 (#F5F5F5 또는 유사한 색상)
   - 어두운 초록색 테두리
   - 클릭 시 현재 화면 유지 (현재 페이지이므로 비활성화되거나 강조 표시 가능)

3. **관리자 버튼**
   - 우측 상단 두 번째 버튼
   - 텍스트: "관리자"
   - 밝은 회색 배경 (#F5F5F5 또는 유사한 색상)
   - 어두운 초록색 테두리
   - 클릭 시 관리자 화면으로 이동

#### 4.1.3 메뉴 아이템 목록 영역

**레이아웃**
- 헤더 영역 아래에 배치
- 메뉴 아이템 카드들을 가로로 나열 (그리드 레이아웃)
- 반응형 디자인 고려 (화면 크기에 따라 열 개수 조정)

**메뉴 아이템 카드 구성**
각 카드는 다음과 같은 요소를 포함합니다:

1. **메뉴 이미지**
   - 카드 상단에 배치
   - 실제 메뉴 이미지 표시
   - 이미지 로드 실패 시 플레이스홀더 표시

2. **제품명**
   - 이미지 아래에 배치
   - 굵은 글씨 (bold)로 표시
   - 예: "아메리카노(ICE)", "아메리카노(HOT)", "카페라떼"

3. **가격**
   - 제품명 아래에 배치
   - 한국 원화(원) 단위로 표시
   - 천 단위 구분자 포함 (예: "4,000원")
   - 기본 메뉴 가격 표시

4. **간단한 설명**
   - 가격 아래에 배치
   - 메뉴에 대한 간단한 설명 텍스트
   - 예: "간단한 설명..."

5. **옵션 체크박스**
   - 설명 아래에 배치
   - 각 옵션은 체크박스 형태
   - 옵션 예시:
     - "샷 추가 (+500원)": 체크 시 가격에 500원 추가
     - "시럽 추가 (+0원)": 체크 시 가격 변화 없음
   - 여러 옵션 선택 가능
   - 옵션 선택 시 카드 내 가격 업데이트 (기본 가격 + 선택된 옵션 가격의 합)

6. **담기 버튼**
   - 카드 하단에 배치
   - 텍스트: "담기"
   - 밝은 회색 배경 (#F5F5F5 또는 유사한 색상)
   - 클릭 시 선택된 옵션과 함께 장바구니에 추가

#### 4.1.4 장바구니 영역

**레이아웃**
- 화면 하단 또는 우측에 배치
- 고정된 높이 또는 최대 높이 설정 (스크롤 가능)
- 밝은 회색 배경 (#F5F5F5 또는 유사한 색상)
   - 어두운 회색 테두리

**요소**
1. **장바구니 제목**
   - 영역 상단 좌측에 배치
   - 텍스트: "장바구니"

2. **장바구니 아이템 목록**
   - 제목 아래에 배치
   - 담긴 아이템들을 리스트 형태로 표시
   - 각 아이템 정보:
     - 제품명
     - 선택된 옵션 정보 (예: "(샷 추가)")
     - 수량 (예: "X 1", "X 2")
     - 해당 아이템의 총 가격 (예: "4,500원", "8,000원")
   - 예시:
     - "아메리카노(ICE) (샷 추가) X 1" - "4,500원"
     - "아메리카노(HOT) X 2" - "8,000원"
   - 아이템 삭제 기능 (선택 사항)

3. **총 금액**
   - 아이템 목록 아래에 배치
   - 텍스트: "총 금액 [금액]원"
   - 금액 부분은 굵은 글씨 (bold)로 표시
   - 예: "총 금액 **12,500원**"
   - 모든 장바구니 아이템의 가격 합계를 실시간으로 계산하여 표시

4. **주문하기 버튼**
   - 총 금액 아래에 배치
   - 텍스트: "주문하기"
   - 밝은 회색 배경 (#F5F5F5 또는 유사한 색상)
   - 어두운 회색 테두리
   - 클릭 시 주문 처리 (백엔드 API 호출)
   - 장바구니가 비어있을 경우 비활성화

#### 4.1.5 기능 요구사항

**메뉴 조회**
- 페이지 로드 시 백엔드 API를 통해 전체 메뉴 목록 조회
- 메뉴 목록을 카드 형태로 렌더링

**옵션 선택**
- 사용자는 각 메뉴 카드에서 옵션을 체크박스로 선택 가능
- 옵션 선택 시 해당 카드의 가격이 실시간으로 업데이트 (기본 가격 + 선택된 옵션 가격의 합)
- 여러 옵션 동시 선택 가능

**장바구니 관리**
- "담기" 버튼 클릭 시 현재 선택된 옵션과 함께 장바구니에 추가
- 같은 메뉴와 옵션 조합이 이미 장바구니에 있으면 수량 증가
- 장바구니 아이템의 총 가격은 (기본 가격 + 옵션 가격) × 수량으로 계산
- 총 금액은 모든 장바구니 아이템의 가격 합계로 실시간 계산
- 장바구니 상태는 페이지 전환 전까지 유지 (브라우저 새로고침 시 초기화 가능)

**주문 처리**
- "주문하기" 버튼 클릭 시 장바구니의 모든 아이템을 주문으로 전송
- 주문 데이터 형식:
  - 메뉴 ID
  - 선택된 옵션 목록
  - 수량
- 주문 성공 시 장바구니 초기화 및 성공 메시지 표시
- 주문 실패 시 에러 메시지 표시

#### 4.1.6 UI/UX 요구사항

**색상**
- 브랜드 컬러: 어두운 초록색 (헤더 로고, 버튼 테두리)
- 배경색: 밝은 회색 (버튼, 장바구니 영역)
- 테두리: 어두운 초록색 또는 어두운 회색

**레이아웃**
- 반응형 디자인 지원 (데스크톱, 태블릿, 모바일)
- 메뉴 카드는 그리드 레이아웃으로 배치
- 적절한 여백과 패딩 적용

**인터랙션**
- 버튼 호버 효과 (선택 사항)
- 장바구니에 아이템 추가 시 피드백 제공 (예: 토스트 메시지)
- 로딩 상태 표시 (메뉴 조회, 주문 처리 중)

**데이터 형식**
- 가격은 한국 원화(원) 단위 사용
- 천 단위 구분자 사용 (쉼표)
- 숫자는 우측 정렬 권장 (가격 표시 시)

### 4.2 관리자 화면

#### 4.2.1 화면 구성

관리자 화면은 다음과 같은 영역으로 구성됩니다:
- 헤더 영역
- 관리자 대시보드 영역
- 재고 현황 영역
- 주문 현황 영역

#### 4.2.2 헤더 영역

**레이아웃**
- 화면 상단에 고정 배치
- 좌측: 브랜드 로고/텍스트
- 우측: 네비게이션 버튼들
- 주문하기 화면과 동일한 구조

**요소**
1. **브랜드 로고**
   - 좌측 상단에 배치
   - "COZY" 텍스트 표시
   - 어두운 초록색 배경 (#006400 또는 유사한 색상)

2. **주문하기 버튼**
   - 우측 상단 첫 번째 버튼
   - 텍스트: "주문하기"
   - 밝은 회색 배경 (#F5F5F5 또는 유사한 색상)
   - 어두운 초록색 테두리
   - 클릭 시 주문하기 화면으로 이동

3. **관리자 버튼**
   - 우측 상단 두 번째 버튼
   - 텍스트: "관리자"
   - 밝은 회색 배경 (#F5F5F5 또는 유사한 색상)
   - 어두운 초록색 테두리
   - 현재 활성화된 화면임을 표시 (다른 버튼과 구분되는 스타일, 예: 배경색 변경 또는 테두리 강조)

#### 4.2.3 관리자 대시보드 영역

**레이아웃**
- 헤더 영역 아래에 배치
- 주문 통계를 한눈에 볼 수 있도록 배치

**요소**
1. **대시보드 제목**
   - 영역 상단에 배치
   - 텍스트: "관리자 대시보드"

2. **주문 통계 요약**
   - 제목 아래에 배치
   - 주문 상태별 통계를 텍스트로 표시
   - 형식: "총 주문 [숫자] / 주문 접수 [숫자] / 제조 중 [숫자] / 제조 완료 [숫자]"
   - 예시: "총 주문 1 / 주문 접수 1 / 제조 중 0 / 제조 완료 0"
   - 각 통계는 실시간으로 업데이트

**주문 상태 정의**
- **총 주문**: 모든 주문의 총 개수
- **주문 접수**: 주문이 접수되어 처리 대기 중인 주문 수
- **제조 중**: 현재 제조 진행 중인 주문 수
- **제조 완료**: 제조가 완료된 주문 수

#### 4.2.4 재고 현황 영역

**레이아웃**
- 관리자 대시보드 영역 아래에 배치
- 메뉴별 재고 정보를 카드 형태로 표시
- 그리드 레이아웃으로 배치 (가로 나열)

**재고 카드 구성**
각 재고 카드는 다음과 같은 요소를 포함합니다:

1. **메뉴명**
   - 카드 상단에 배치
   - 굵은 글씨 (bold)로 표시
   - 예: "아메리카노 (ICE)", "아메리카노 (HOT)", "카페라떼"

2. **재고 수량**
   - 메뉴명 아래에 배치
   - 현재 재고 수량 표시
   - 형식: "[숫자]개"
   - 예: "10개"

3. **재고 조정 버튼**
   - 재고 수량 옆 또는 아래에 배치
   - "+" 버튼: 재고 증가 (클릭 시 1개씩 증가)
   - "-" 버튼: 재고 감소 (클릭 시 1개씩 감소)
   - 재고가 0일 때 "-" 버튼은 비활성화 또는 작동하지 않도록 처리
   - 버튼 클릭 시 백엔드 API를 통해 재고 수량 업데이트
   - 업데이트 후 화면에 즉시 반영

#### 4.2.5 주문 현황 영역

**레이아웃**
- 재고 현황 영역 아래에 배치
- 주문 목록을 리스트 형태로 표시
- 스크롤 가능하도록 설정 (주문이 많을 경우 대비)

**요소**
1. **주문 현황 제목**
   - 영역 상단 좌측에 배치
   - 텍스트: "주문 현황"

2. **주문 목록**
   - 제목 아래에 배치
   - 각 주문을 카드 또는 리스트 아이템 형태로 표시
   - 주문이 없을 경우 "주문이 없습니다" 등의 메시지 표시

**주문 아이템 구성**
각 주문 아이템은 다음과 같은 정보를 포함합니다:

1. **주문 시간**
   - 주문 아이템 상단에 배치
   - 형식: "월 일 시:분" (예: "7월 31일 13:00")
   - 주문이 접수된 시간 표시

2. **주문 메뉴 정보**
   - 주문 시간 아래에 배치
   - 메뉴명과 수량을 표시
   - 형식: "[메뉴명] x [수량]"
   - 예: "아메리카노(ICE) x 1"
   - 옵션이 포함된 경우 옵션 정보도 함께 표시 (예: "아메리카노(ICE) (샷 추가) x 1")

3. **주문 가격**
   - 주문 메뉴 정보 아래 또는 옆에 배치
   - 해당 주문의 총 가격 표시
   - 형식: "[금액]원"
   - 예: "4,000원"
   - 천 단위 구분자 포함

4. **주문 상태 변경 버튼**
   - 주문 아이템 하단 또는 우측에 배치
   - 주문 상태에 따라 다른 버튼 표시:
     - **"주문 접수"** 버튼: 주문이 처음 생성되었을 때 표시, 클릭 시 주문 상태를 "주문 접수"로 변경
     - **"제조 시작"** 버튼: 주문 접수 상태일 때 표시, 클릭 시 주문 상태를 "제조 중"으로 변경
     - **"제조 완료"** 버튼: 제조 중 상태일 때 표시, 클릭 시 주문 상태를 "제조 완료"로 변경
   - 버튼 클릭 시 백엔드 API를 통해 주문 상태 업데이트
   - 상태 변경 후 주문 목록과 대시보드 통계 즉시 업데이트

**주문 표시 순서**
- 최신 주문이 상단에 표시 (시간 내림차순)
- 또는 주문 상태별로 정렬 가능 (주문 접수 > 제조 중 > 제조 완료)

#### 4.2.6 기능 요구사항

**대시보드 통계 조회**
- 페이지 로드 시 백엔드 API를 통해 주문 통계 조회
- 주문 상태별 개수를 실시간으로 계산하여 표시
- 주문 상태가 변경될 때마다 통계 자동 업데이트

**재고 관리**
- 페이지 로드 시 백엔드 API를 통해 모든 메뉴의 재고 정보 조회
- "+" 버튼 클릭 시 해당 메뉴의 재고를 1개 증가
- "-" 버튼 클릭 시 해당 메뉴의 재고를 1개 감소 (단, 재고가 0 이상일 때만)
- 재고 변경 시 백엔드 API를 통해 재고 수량 업데이트
- 업데이트 후 화면에 즉시 반영
- 재고가 0일 때 "-" 버튼 비활성화

**주문 조회 및 상태 관리**
- 페이지 로드 시 백엔드 API를 통해 모든 주문 목록 조회
- 주문 목록을 주문 시간 순서대로 표시
- 각 주문의 상태에 따라 적절한 상태 변경 버튼 표시
- 상태 변경 버튼 클릭 시:
  - 백엔드 API를 통해 주문 상태 업데이트
  - 주문 목록에서 해당 주문의 버튼 변경
  - 대시보드 통계 자동 업데이트
- 주문 상태 변경 시 성공 메시지 표시 (선택 사항)
- 주문 상태 변경 실패 시 에러 메시지 표시

**자동 새로고침 (선택 사항)**
- 주문 현황을 주기적으로 자동 업데이트 (예: 30초마다)
- 또는 사용자가 수동으로 새로고침 버튼 클릭
- 실시간 업데이트를 위한 웹소켓 연결도 고려 가능

#### 4.2.7 UI/UX 요구사항

**색상**
- 브랜드 컬러: 어두운 초록색 (헤더 로고, 버튼 테두리)
- 배경색: 밝은 회색 (버튼, 카드 영역)
- 테두리: 어두운 초록색 또는 어두운 회색
- 활성화된 버튼: 다른 색상 또는 스타일로 구분

**레이아웃**
- 반응형 디자인 지원 (데스크톱, 태블릿, 모바일)
- 재고 카드는 그리드 레이아웃으로 배치
- 주문 목록은 세로 스크롤 가능
- 적절한 여백과 패딩 적용
- 섹션별로 명확하게 구분

**인터랙션**
- 버튼 호버 효과 (선택 사항)
- 재고 변경 시 시각적 피드백 제공 (예: 수량 변경 애니메이션)
- 주문 상태 변경 시 피드백 제공 (예: 토스트 메시지)
- 로딩 상태 표시 (데이터 조회, 상태 변경 중)
- 버튼 클릭 시 즉각적인 피드백 (예: 버튼 비활성화 또는 로딩 표시)

**데이터 형식**
- 가격은 한국 원화(원) 단위 사용
- 천 단위 구분자 사용 (쉼표)
- 날짜/시간 형식: "월 일 시:분" (예: "7월 31일 13:00")
- 재고 수량 형식: "[숫자]개"
- 숫자는 우측 정렬 권장 (가격, 수량 표시 시)

**접근성**
- 버튼에 적절한 라벨 제공
- 키보드 네비게이션 지원 (선택 사항)
- 재고가 0일 때 "-" 버튼 명확하게 비활성화 표시

## 5. 백엔드 개발 요구사항

### 5.1 데이터 모델

#### 5.1.1 Menus (메뉴)

메뉴 테이블은 커피 메뉴 정보를 저장합니다.

**필드**
- `id` (Primary Key): 메뉴 고유 ID (자동 증가)
- `name` (VARCHAR): 커피 이름 (예: "아메리카노(ICE)", "카페라떼")
- `description` (TEXT): 메뉴 설명 (예: "시원하고 깔끔한 아이스 아메리카노")
- `price` (INTEGER): 기본 가격 (원 단위, 예: 4000)
- `image` (VARCHAR): 이미지 파일 경로 (예: "/americano-ice.jpg")
- `stock` (INTEGER): 재고 수량 (기본값: 0)

**제약 조건**
- `name`: 필수, 중복 불가
- `price`: 필수, 0 이상
- `stock`: 필수, 0 이상

#### 5.1.2 Options (옵션)

옵션 테이블은 메뉴에 추가할 수 있는 옵션 정보를 저장합니다.

**필드**
- `id` (Primary Key): 옵션 고유 ID (자동 증가)
- `name` (VARCHAR): 옵션 이름 (예: "샷 추가", "시럽 추가")
- `price` (INTEGER): 옵션 가격 (원 단위, 예: 500, 0도 가능)
- `menu_id` (Foreign Key): 연결된 메뉴 ID (Menus 테이블 참조)

**제약 조건**
- `name`: 필수
- `price`: 필수, 0 이상
- `menu_id`: 필수, Menus 테이블의 유효한 ID

**관계**
- 하나의 메뉴는 여러 옵션을 가질 수 있음 (1:N)
- 옵션은 하나의 메뉴에만 연결됨

#### 5.1.3 Orders (주문)

주문 테이블은 주문 정보를 저장합니다.

**필드**
- `id` (Primary Key): 주문 고유 ID (자동 증가)
- `created_at` (TIMESTAMP): 주문 일시 (기본값: 현재 시간)
- `status` (VARCHAR): 주문 상태 (예: "received", "manufacturing", "completed")
- `total_price` (INTEGER): 주문 총 금액 (원 단위)

**제약 조건**
- `created_at`: 필수
- `status`: 필수, "received", "manufacturing", "completed" 중 하나
- `total_price`: 필수, 0 이상

**주문 상태 정의**
- `received`: 주문 접수 (기본 상태)
- `manufacturing`: 제조 중
- `completed`: 제조 완료

#### 5.1.4 OrderItems (주문 항목)

주문 항목 테이블은 주문에 포함된 메뉴와 옵션 정보를 저장합니다.

**필드**
- `id` (Primary Key): 주문 항목 고유 ID (자동 증가)
- `order_id` (Foreign Key): 주문 ID (Orders 테이블 참조)
- `menu_id` (Foreign Key): 메뉴 ID (Menus 테이블 참조)
- `quantity` (INTEGER): 수량
- `item_price` (INTEGER): 해당 항목의 단가 (메뉴 가격 + 옵션 가격의 합)
- `options` (JSON 또는 TEXT): 선택된 옵션 정보 (JSON 형식으로 저장)

**제약 조건**
- `order_id`: 필수, Orders 테이블의 유효한 ID
- `menu_id`: 필수, Menus 테이블의 유효한 ID
- `quantity`: 필수, 1 이상
- `item_price`: 필수, 0 이상

**관계**
- 하나의 주문은 여러 주문 항목을 가질 수 있음 (1:N)
- 주문 항목은 하나의 주문에만 속함
- 주문 항목은 하나의 메뉴를 참조

**옵션 정보 저장 형식 (JSON 예시)**
```json
[
  {"id": 1, "name": "샷 추가", "price": 500},
  {"id": 2, "name": "시럽 추가", "price": 0}
]
```

### 5.2 데이터 스키마를 위한 사용자 흐름

#### 5.2.1 메뉴 조회 흐름

1. **주문하기 화면 접속**
   - 사용자가 주문하기 화면에 접속
   - 프런트엔드에서 `GET /api/menus` API 호출

2. **메뉴 데이터 조회**
   - 백엔드에서 Menus 테이블에서 모든 메뉴 조회
   - 각 메뉴에 연결된 Options 정보도 함께 조회
   - 재고 수량(stock)은 포함하되, 주문하기 화면에는 표시하지 않음

3. **화면 표시**
   - 조회된 메뉴 정보를 카드 형태로 표시
   - 메뉴 이름, 설명, 가격, 이미지, 옵션 목록 표시

#### 5.2.2 재고 정보 조회 흐름

1. **관리자 화면 접속**
   - 관리자가 관리자 화면에 접속
   - 프런트엔드에서 `GET /api/menus` API 호출 (재고 정보 포함)

2. **재고 현황 표시**
   - Menus 테이블의 stock 필드를 조회하여 표시
   - 재고 상태에 따라 "정상", "주의", "품절" 표시

#### 5.2.3 주문 처리 흐름

1. **장바구니 구성**
   - 사용자가 메뉴를 선택하고 옵션을 선택하여 장바구니에 추가
   - 장바구니는 프런트엔드에서만 관리 (세션/로컬 상태)

2. **주문하기 버튼 클릭**
   - 사용자가 "주문하기" 버튼 클릭
   - 프런트엔드에서 `POST /api/orders` API 호출
   - 요청 본문에 주문 정보 포함:
     ```json
     {
       "items": [
         {
           "menu_id": 1,
           "quantity": 2,
           "options": [{"id": 1, "name": "샷 추가", "price": 500}],
           "item_price": 4500
         }
       ],
       "total_price": 9000
     }
     ```

3. **주문 저장 및 재고 차감**
   - 백엔드에서 Orders 테이블에 주문 정보 저장
   - OrderItems 테이블에 주문 항목들 저장
   - 주문에 포함된 각 메뉴의 재고(stock)를 수량만큼 차감
   - Menus 테이블의 stock 필드 업데이트
   - 주문 상태는 기본적으로 "received"로 설정

4. **응답 및 피드백**
   - 주문 성공 시 주문 ID 반환
   - 프런트엔드에서 장바구니 초기화 및 성공 메시지 표시

#### 5.2.4 주문 현황 조회 흐름

1. **관리자 화면 주문 현황**
   - 관리자가 관리자 화면의 주문 현황 섹션 확인
   - 프런트엔드에서 `GET /api/orders` API 호출

2. **주문 목록 조회**
   - 백엔드에서 Orders 테이블과 OrderItems 테이블을 조인하여 조회
   - 주문 일시(created_at), 주문 내용(메뉴, 수량, 옵션), 금액 정보 반환
   - 주문 상태별로 정렬 (주문 접수 > 제조 중 > 제조 완료)

3. **화면 표시**
   - 조회된 주문 정보를 리스트 형태로 표시
   - 각 주문의 상태에 따라 적절한 버튼 표시

#### 5.2.5 주문 상태 변경 흐름

1. **상태 변경 버튼 클릭**
   - 관리자가 "제조 시작" 또는 "제조 완료" 버튼 클릭
   - 프런트엔드에서 `PATCH /api/orders/:id` API 호출
   - 요청 본문에 새로운 상태 포함:
     ```json
     {
       "status": "manufacturing"  // 또는 "completed"
     }
     ```

2. **상태 업데이트**
   - 백엔드에서 Orders 테이블의 해당 주문의 status 필드 업데이트
   - 업데이트 성공 시 업데이트된 주문 정보 반환

3. **화면 갱신**
   - 프런트엔드에서 주문 목록과 대시보드 통계 자동 업데이트

### 5.3 API 설계

#### 5.3.1 메뉴 관련 API

**GET /api/menus**
- **설명**: 모든 메뉴 목록 조회
- **요청**: 없음
- **응답**:
  ```json
  [
    {
      "id": 1,
      "name": "아메리카노(ICE)",
      "description": "시원하고 깔끔한 아이스 아메리카노",
      "price": 4000,
      "image": "/americano-ice.jpg",
      "stock": 10,
      "options": [
        {
          "id": 1,
          "name": "샷 추가",
          "price": 500
        },
        {
          "id": 2,
          "name": "시럽 추가",
          "price": 0
        }
      ]
    }
  ]
  ```
- **에러 처리**:
  - 500: 서버 오류

**GET /api/menus/:id**
- **설명**: 특정 메뉴 상세 정보 조회
- **요청 파라미터**: `id` (메뉴 ID)
- **응답**:
  ```json
  {
    "id": 1,
    "name": "아메리카노(ICE)",
    "description": "시원하고 깔끔한 아이스 아메리카노",
    "price": 4000,
    "image": "/americano-ice.jpg",
    "stock": 10,
    "options": [...]
  }
  ```
- **에러 처리**:
  - 404: 메뉴를 찾을 수 없음
  - 500: 서버 오류

**PATCH /api/menus/:id/stock**
- **설명**: 메뉴 재고 수량 수정 (관리자용)
- **요청 파라미터**: `id` (메뉴 ID)
- **요청 본문**:
  ```json
  {
    "stock": 15
  }
  ```
- **응답**:
  ```json
  {
    "id": 1,
    "name": "아메리카노(ICE)",
    "stock": 15
  }
  ```
- **에러 처리**:
  - 400: 잘못된 요청 (stock이 음수인 경우 등)
  - 404: 메뉴를 찾을 수 없음
  - 500: 서버 오류

#### 5.3.2 주문 관련 API

**POST /api/orders**
- **설명**: 새 주문 생성
- **요청 본문**:
  ```json
  {
    "items": [
      {
        "menu_id": 1,
        "quantity": 2,
        "options": [
          {"id": 1, "name": "샷 추가", "price": 500}
        ],
        "item_price": 4500
      },
      {
        "menu_id": 2,
        "quantity": 1,
        "options": [],
        "item_price": 4000
      }
    ],
    "total_price": 13000
  }
  ```
- **응답**:
  ```json
  {
    "id": 1,
    "created_at": "2024-01-15T10:30:00Z",
    "status": "received",
    "total_price": 13000,
    "items": [
      {
        "id": 1,
        "menu_id": 1,
        "menu_name": "아메리카노(ICE)",
        "quantity": 2,
        "item_price": 4500,
        "options": [...]
      }
    ]
  }
  ```
- **비즈니스 로직**:
  - 주문 생성 시 각 메뉴의 재고 확인
  - 재고가 부족한 경우 400 에러 반환
  - 주문 생성 후 각 메뉴의 재고 차감
  - Orders 테이블에 주문 정보 저장
  - OrderItems 테이블에 주문 항목들 저장
- **에러 처리**:
  - 400: 재고 부족 또는 잘못된 요청
  - 500: 서버 오류

**GET /api/orders**
- **설명**: 모든 주문 목록 조회 (관리자용)
- **요청**: 없음 (선택적으로 쿼리 파라미터로 상태 필터링 가능)
- **응답**:
  ```json
  [
    {
      "id": 1,
      "created_at": "2024-01-15T10:30:00Z",
      "status": "received",
      "total_price": 13000,
      "items": [
        {
          "id": 1,
          "menu_id": 1,
          "menu_name": "아메리카노(ICE)",
          "quantity": 2,
          "item_price": 4500,
          "options": [
            {"id": 1, "name": "샷 추가", "price": 500}
          ]
        }
      ]
    }
  ]
  ```
- **에러 처리**:
  - 500: 서버 오류

**GET /api/orders/:id**
- **설명**: 특정 주문 상세 정보 조회
- **요청 파라미터**: `id` (주문 ID)
- **응답**:
  ```json
  {
    "id": 1,
    "created_at": "2024-01-15T10:30:00Z",
    "status": "received",
    "total_price": 13000,
    "items": [...]
  }
  ```
- **에러 처리**:
  - 404: 주문을 찾을 수 없음
  - 500: 서버 오류

**PATCH /api/orders/:id**
- **설명**: 주문 상태 변경 (관리자용)
- **요청 파라미터**: `id` (주문 ID)
- **요청 본문**:
  ```json
  {
    "status": "manufacturing"  // "received", "manufacturing", "completed" 중 하나
  }
  ```
- **응답**:
  ```json
  {
    "id": 1,
    "created_at": "2024-01-15T10:30:00Z",
    "status": "manufacturing",
    "total_price": 13000,
    "items": [...]
  }
  ```
- **비즈니스 로직**:
  - 주문 상태는 "received" → "manufacturing" → "completed" 순서로만 변경 가능
  - 잘못된 상태 변경 시도 시 400 에러 반환
- **에러 처리**:
  - 400: 잘못된 상태 변경 (예: "completed"에서 "received"로 변경 시도)
  - 404: 주문을 찾을 수 없음
  - 500: 서버 오류

#### 5.3.3 API 공통 사항

**응답 형식**
- 성공 시: HTTP 상태 코드 200 또는 201, JSON 형식의 데이터
- 에러 시: HTTP 상태 코드 4xx 또는 5xx, 에러 메시지 포함
  ```json
  {
    "error": "에러 메시지",
    "details": "상세 정보 (선택 사항)"
  }
  ```

**CORS 설정**
- 프런트엔드와 백엔드가 분리되어 있으므로 CORS 설정 필요
- 개발 환경: 모든 origin 허용 또는 특정 origin 허용
- 프로덕션 환경: 특정 origin만 허용

**데이터 검증**
- 요청 본문의 필수 필드 검증
- 데이터 타입 및 범위 검증
- 비즈니스 로직 검증 (예: 재고 확인)

**에러 처리**
- 명확한 에러 메시지 제공
- 적절한 HTTP 상태 코드 사용
- 로깅을 통한 에러 추적